<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoteScanner Pro | D√©tection IA de notes</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
    <style>
        /* Styles suppl√©mentaires pour GitHub Pages */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
        }
        
        .github-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #24292e;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: #1e293b;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #666;
        }
        
        .connection-status.connected {
            border-left-color: #00ff00;
        }
        
        .connection-status.error {
            border-left-color: #ff4444;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-indicator.online {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.offline {
            background: #ff4444;
        }
        
        .status-indicator.connecting {
            background: #ff9900;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .api-url-display {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            word-break: break-all;
            margin: 10px 0;
        }
        
        .test-button {
            background: #00ff00;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .test-button:hover {
            background: #00cc00;
        }
    </style>
</head>
<body>
    <!-- Badge GitHub -->
    <div class="github-badge">
        <svg height="20" width="20" viewBox="0 0 16 16" fill="white">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
        </svg>
        GitHub Pages
    </div>
    
    <div class="app-container">
        <header>
            <div class="logo-area">
                <h1>üìù NoteScanner <span class="pro">PRO</span></h1>
                <p class="subtitle">D√©tection IA de notes en temps r√©el</p>
            </div>
        </header>
        
        <!-- Statut de connexion -->
        <div class="connection-status" id="connection-status">
            <span class="status-indicator connecting" id="status-indicator"></span>
            <span id="connection-text">Connexion en cours...</span>
        </div>
        
        <!-- Zone cam√©ra -->
        <div class="camera-wrapper">
            <div class="precision-badge">MODE D√âTECTION ACTIF</div>
            <video id="video" autoplay playsinline></video>
            <canvas id="overlay"></canvas>
            <div class="target-indicator">
                <div class="corner tl"></div>
                <div class="corner tr"></div>
                <div class="corner bl"></div>
                <div class="corner br"></div>
            </div>
        </div>
        
        <!-- R√©sultats -->
        <div class="results-area">
            <div class="current-card">
                <span class="label">NOTE D√âTECT√âE</span>
                <div class="main-display">
                    <div class="note-container">
                        <span id="note-display">---</span>
                        <div id="confidence-badge" class="confidence-badge">0%</div>
                    </div>
                    <button id="btn-save" class="save-btn" disabled>
                        üíæ SAUVEGARDER
                    </button>
                </div>
            </div>
            
            <div class="history-card">
                <div class="history-header">
                    <span class="label">HISTORIQUE DE SESSION</span>
                    <span id="session-count">0 notes</span>
                </div>
                <ul id="history-list"></ul>
            </div>
        </div>
        
        <!-- Panel de contr√¥le -->
        <div class="control-panel">
            <button id="btn-test" class="test-button">üîç TESTER LA CONNEXION API</button>
            <button id="btn-manual" class="test-button">üì∏ D√âTECTION MANUELLE</button>
        </div>
        
        <!-- Informations de d√©bogage -->
        <div class="debug-info">
            <div id="debug-info">Statut: Initialisation...</div>
            <div id="api-url-display" class="api-url-display">
                URL API: <span id="current-api-url">Chargement...</span>
            </div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions">
            <h3>üéØ Comment utiliser :</h3>
            <ol>
                <li>Autorisez l'acc√®s √† la cam√©ra lorsque demand√©</li>
                <li>Pointez vers une note √©crite (ex: "14/20", "15.5/20")</li>
                <li>Le syst√®me d√©tectera automatiquement la note</li>
                <li>Cliquez sur "SAUVEGARDER" pour ajouter √† l'historique</li>
            </ol>
            <p><strong>Probl√®me de connexion ?</strong> V√©rifiez que le backend Colab est actif.</p>
        </div>
        
        <!-- Cr√©dits -->
        <footer>
            <p>NoteScanner Pro v3.0 | Powered by YOLOv8 & PaddleOCR | D√©ploy√© sur GitHub Pages</p>
            <p class="small">Backend h√©berg√© sur Google Colab avec ngrok | Frontend sur GitHub Pages</p>
        </footer>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
